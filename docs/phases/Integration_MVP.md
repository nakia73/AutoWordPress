# Integration Phase: MVP（統合・MVPリリース）

> **サービス名:** Argo Note
> **関連ドキュメント:** [開発ロードマップ](../DEVELOPMENT_ROADMAP.md) | [マスターアーキテクチャ](../architecture/00_Master_Architecture.md)
>
> **前提条件:** Stream A（記事生成）とStream W（WordPress）が動作確認済み

**テーマ:** Integration & Launch
**目的:** Stream A + Stream W を結合し、本番サービスとして完成

---

## 統合アーキテクチャ

```
┌─────────────────────────────────────────────────────────────────────┐
│                         統合後の構成                                 │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌──────────────┐      ┌──────────────┐      ┌──────────────┐       │
│  │   Next.js    │──────│   Inngest    │──────│   Stream A   │       │
│  │   Frontend   │      │   Worker     │      │  (記事生成)   │       │
│  └──────────────┘      └──────────────┘      └──────────────┘       │
│         │                    │                      │               │
│         │                    │                      ▼               │
│         ▼                    │              ┌──────────────┐        │
│  ┌──────────────┐            │              │   Stream W   │        │
│  │   Supabase   │            └──────────────│  (WordPress) │        │
│  │   Auth + DB  │                           └──────────────┘        │
│  └──────────────┘                                  │                │
│                                                    ▼                │
│                                            ┌──────────────┐         │
│                                            │  WordPress   │         │
│                                            │   Multisite  │         │
│                                            └──────────────┘         │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## フェーズ一覧

### I-1: A↔W結合

**ゴール:** 記事生成→WP投稿の自動化フロー完成

| タスク | 成果物 | 状態 |
|--------|--------|------|
| Stream A出力をStream W入力に接続 | 統合関数 | ⬜ 未完了 |
| Inngestワークフロー実装 | `generate-and-post.ts` | ⬜ 未完了 |
| エラーハンドリング・リトライ | 耐障害性 | ⬜ 未完了 |
| E2Eテスト | 自動テスト | ⬜ 未完了 |

**フロー:**
```
ユーザー入力
    ↓
プロダクト分析 (A-1)
    ↓
記事生成 (A-2)
    ↓
WordPress投稿 (W-4)
    ↓
完了通知
```

---

### I-2: 認証・ユーザー管理

**ゴール:** Supabase Auth統合、ユーザーとサイトの紐付け

| タスク | 成果物 | 状態 |
|--------|--------|------|
| Supabase Auth設定 | 認証フロー | ✅ 完了 |
| Google OAuth設定 | OAuth連携 | ✅ 完了 |
| ユーザー→サイト紐付け | DBスキーマ | ✅ 完了 |
| サインアップ→サイト作成フロー | 自動化 | ⬜ 未完了 |

---

### I-3: 本番UI構築

**ゴール:** ダッシュボード・オンボーディングUI

| タスク | 成果物 | 状態 |
|--------|--------|------|
| オンボーディングフロー | ウィザードUI | ✅ 骨組み完了 |
| ダッシュボード | 記事一覧・統計 | ✅ 骨組み完了 |
| 記事詳細・編集画面 | エディタUI | ⬜ 未完了 |
| 設定画面 | ユーザー設定 | ⬜ 未完了 |

---

### I-4: 自動化・スケジューリング

**ゴール:** 定期記事生成の自動化

| タスク | 成果物 | 状態 |
|--------|--------|------|
| Inngestスケジューラー設定 | cron設定 | ⬜ 未完了 |
| スケジュール管理UI | 設定画面 | ⬜ 未完了 |
| 通知システム（メール） | 完了通知 | ⬜ 未完了 |

---

### I-5: 決済統合

**ゴール:** Stripe連携、サブスクリプション管理

| タスク | 成果物 | 状態 |
|--------|--------|------|
| Stripe設定 | 商品・価格設定 | ⬜ 未完了 |
| Checkout統合 | 決済フロー | ⬜ 未完了 |
| Webhook処理 | 支払い確認 | ⬜ 未完了 |
| プラン制限実装 | 機能制限 | ⬜ 未完了 |

**料金プラン（案）:**
| プラン | 月額 | 記事数/月 | サイト数 |
|--------|------|----------|---------|
| Free | $0 | 5 | 1 |
| Pro | $29 | 50 | 3 |
| Business | $99 | 無制限 | 10 |

---

### I-6: MVP Launch

**ゴール:** ベータリリース

| タスク | 成果物 | 状態 |
|--------|--------|------|
| 本番環境デプロイ | Vercel/VPS | ⬜ 未完了 |
| ドメイン設定 | argonote.app | ⬜ 未完了 |
| 監視設定 | UptimeRobot/Sentry | ⬜ 未完了 |
| ベータユーザー招待 | ウェイトリストから | ⬜ 未完了 |
| フィードバック収集 | アンケート/インタビュー | ⬜ 未完了 |

---

## 技術スタック（統合後）

| レイヤー | 技術 |
|---------|------|
| Frontend | Next.js 16+, Tailwind CSS v4, Shadcn/UI |
| Backend | Next.js API Routes, Prisma ORM |
| Auth | Supabase Auth |
| Database | Supabase (PostgreSQL) |
| Worker | Inngest |
| AI | Gemini 3.0 Pro (LiteLLM) |
| WordPress | Hetzner VPS, Multisite |
| Storage | Cloudflare R2 |
| Payment | Stripe |
| Hosting | Vercel (App), Hetzner (WordPress) |
| Monitoring | UptimeRobot, Sentry, PostHog |

---

## 成功基準

1. **E2E動作:** ユーザー登録→サイト作成→記事生成→公開が自動で完了
2. **速度:** 記事生成から公開まで20分以内
3. **信頼性:** エラー率1%以下
4. **ベータフィードバック:** 10人以上からフィードバック収集

---

## 旧ドキュメントとの対応

| 旧Phase | 対応 |
|---------|------|
| [Phase 1: Infrastructure](./Phase1_Infrastructure.md) | I-2（認証部分） |
| [Phase 2: Core AI](./Phase2_CoreAI.md) | I-1 |
| [Phase 3: User Interface](./Phase3_UserInterface.md) | I-3 |
| [Phase 4: Automation](./Phase4_Automation.md) | I-4 |
| [Phase 5: Monetization](./Phase5_Monetization.md) | I-5 |
| [Phase 6: MVP Launch](./Phase6_MVPLaunch.md) | I-6 |
